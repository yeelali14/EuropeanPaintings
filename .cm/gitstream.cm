# -*- mode: yaml -*-

manifest:
  version: 1.0
 
config:
  admin:
    users: ['EladKohavi']

automations:
  try_labels:
    if: 
      - true
    run: 
      - action: add-label@v1
        args:
          label: 'ğŸ’¯ Sonar'
          color: 'ABEBC6'
      - action: add-label@v1
        args:
          label: '{{ sonar.vulnerabilities.count }} ğŸ›¡ï¸ Vulnerabilities'
          color: {{ colors.vulnerabilities }}
      - action: add-label@v1
        args:
          label: '{{ sonar.duplications }} ğŸ‘¯ Duplications'
          color: {{ colors.duplications }}
      - action: add-label@v1
        args:
          label: '{{ sonar.security_hotspots.count }} ğŸŒ¶ï¸ Security hotspots'
          color: {{ colors.security_hotspots }}
      - action: add-label@v1
        args:
          label: '{{ sonar.code_smells.count }} ğŸ’© Code Smells'
          color: {{ colors.code_smells }}
      - action: add-label@v1
        args:
          label: '{{ sonar.bugs.count }} ğŸ Bugs'
          color: {{ colors.bugs }}



sonar: {{ pr | sonarParser }}
jit: {{ pr | extractJitFindings }}
colors:
  code_smells: 'C19A6B'
  bugs: 'F5B7B1'
  vulnerabilities: 'F5B7B1'
  security_hotspots: 'F5B7B1'
  duplications: 'D7BDE2'